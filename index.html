<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">

        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:300,400,500">
        <link rel="stylesheet" href="css/font-awesome.min.css">
        <link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="css/jquery.dataTables.min.css">
        <link rel="stylesheet" href="css/jquery-confirm.min.css">

        <script src="js/jquery-3.5.1.js"></script>
        <script src="js/jquery.dataTables.min.js"></script>
        <script src="js/jquery-confirm.min.js"></script>
        <script src="js/dom-checkbox.js"></script>
        <script src="js/jquery-sortSections.js"></script>
        <script src="js/muuri.min.js"></script>
        <script src="js/web-animations.min.js"></script>
        <script src="js/Chart.min.js"></script>
        <script src="js/fontawesome.min.js"></script>
        <script src="js/makeResizableDiv.js"></script>

        <title>Grid Dashboard</title>
        
    </head>
    <body>
        <div id="header">
            <input id="header_input" placeholder="New Dashboard">
            <div id="action_bar">
                <div class="dropdown_button">
                    <button title="Add new widget" class="action_button" id="add_widget"><i class="fa fa-square-plus"></i></button>
                    <div class="dropdown_content">
                        <a href="Column">Column</a>
                        <a href="Pie">Pie</a>
                        <a href="Scatter">Scatter</a>
                    </div>
                </div>
                <button title="Enable Select-Edit" class="action_button" id="enable_select-edit"><i class="fa fa-pen-to-square"></i></button>
                <button title="Delete Dashboard" class="action_button" id="delete_dashboard"><i class="fa fa-trash"></i></button>
                <button title="Create New Dashboard" class="action_button" id="new_dashboard"><i class="fa fa-arrow-up-right-from-square"></i></button>
                <button title="Save Dashboard" class="action_button" id="save_dashboard"><i class="fa fa-floppy-disk"></i></button>
                <button title="Dashboard Menu" class="action_button" id="dashboard_menu"><i class="fa fa-bars"></i></button>
            </div>
        </div>
        
    <div class="grid">
         
      <div class="item">
        <div class="item-content resizable" id="item1">
              <div class='x'><i class="fa fa-xmark"></i></div>
              <div class='resizers inactive'>
                <div class='resizer bottom-right hidden'></div>
                <canvas id="myChart" width="800" height="200"></canvas>
              </div>
        </div>
      </div>
          
      <div class="item">
        <div class="item-content resizable" id="item2">
              <div class='x'><i class="fa fa-xmark"></i></div>
              <div class='resizers inactive'>
                <div class='resizer bottom-right hidden'></div>
                <canvas id="myPie" width="200" height="200"></canvas>
              </div>
        </div>
      </div>
      <div class="item">
        <div class="item-content resizable" id="item3">
              <div class='x'><i class="fa fa-xmark"></i></div>
              <div class='resizers inactive'>
                <div class='resizer bottom-right hidden'></div>
                <canvas id="myPie2" width="200" height="200"></canvas>
              </div>
        </div>
      </div>
     
      <div class="item">
        <div class="item-content resizable" id="item4">
              <div class='x'><i class="fa fa-xmark"></i></div>
              <div class='resizers inactive'>
                <div class='resizer bottom-right hidden'></div>
                <canvas id="myChart2"></canvas>
              </div>
        </div>
      </div>
        
    </div>
    
        
        
        
    <div id="add_new_widget_container" class="hidden">
        <div class="blur_backdrop"></div>
        <span id="add_new_widget_panel">
            <div class="top_bar">
                <button class="action_button close_button"><i class="fa fa-xmark"></i></button>
            </div>
            <div class="panel_header">Add New Widget</div>
            <div class="panel_section">
                <label for="select_widget">Select Widget</label><br>
                <input type="radio" id="Column" name="select_widget" value="Column">
                <label for="Column">Column</label><br>
                    
                <input type="radio" id="Bar" name="select_widget" value="Bar">
                <label for="Bar">Bar</label><br>
                    
                <input type="radio" id="Line" name="select_widget" value="Line">
                <label for="Line">Line</label><br>
                    
                <input type="radio" id="Pie" name="select_widget" value="Pie">
                <label for="Pie">Pie</label><br>
                
                <input type="radio" id="Scatter" name="select_widget" value="Scatter">
                <label for="Scatter">Scatter</label><br>
                    
                <button id="add_new_widget_submit">Submit</button>
                
            </div>
        </span>
    </div> 
        
        
       
<div id="edit_widget_container" class="hidden">
    <div class="blur_backdrop"></div>
    <span id="edit_widget_panel">
        <div class="top_bar">
            <button class="action_button close_button"><i class="fa fa-xmark"></i></button>
        </div>
        <div class="panel_header">Edit Widget</div>
        <div class="panel_section">
            <button id="edit_widget_submit">Submit</button>
        </div>
    </span>
</div> 
        
        
<script>
    var grid = new Muuri('.grid', {
        dragEnabled: true,
          dragStartPredicate: function (item, e) {
            // Start moving the item if...
             
            grid.refreshItems();
            grid.layout();
            console.log(e);
            if (e.type != "move" && e.target.classList.contains("chartjs-render-monitor")) {
              return true;
            }
          },
    });
    const ctx = $('#myChart');
    const myChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
            datasets: [{
                label: '# of Votes',
                data: [12, 19, 3, 5, 2, 3],
                backgroundColor: [
                    'rgba(255, 99, 132, 0.2)',
                    'rgba(54, 162, 235, 0.2)',
                    'rgba(255, 206, 86, 0.2)',
                    'rgba(75, 192, 192, 0.2)',
                    'rgba(153, 102, 255, 0.2)',
                    'rgba(255, 159, 64, 0.2)'
                ],
                borderColor: [
                    'rgba(255, 99, 132, 1)',
                    'rgba(54, 162, 235, 1)',
                    'rgba(255, 206, 86, 1)',
                    'rgba(75, 192, 192, 1)',
                    'rgba(153, 102, 255, 1)',
                    'rgba(255, 159, 64, 1)'
                ],
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            },
            maintainAspectRatio: false
            
        }
    });
    const ctx2 = $('#myChart2');
    const myChart2 = new Chart(ctx2, {
        type: 'bar',
        data: {
            labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
            datasets: [{
                label: '# of Votes',
                data: [12, 19, 3, 5, 2, 3],
                backgroundColor: [
                    'rgba(255, 99, 132, 0.2)',
                    'rgba(54, 162, 235, 0.2)',
                    'rgba(255, 206, 86, 0.2)',
                    'rgba(75, 192, 192, 0.2)',
                    'rgba(153, 102, 255, 0.2)',
                    'rgba(255, 159, 64, 0.2)'
                ],
                borderColor: [
                    'rgba(255, 99, 132, 1)',
                    'rgba(54, 162, 235, 1)',
                    'rgba(255, 206, 86, 1)',
                    'rgba(75, 192, 192, 1)',
                    'rgba(153, 102, 255, 1)',
                    'rgba(255, 159, 64, 1)'
                ],
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            },
            maintainAspectRatio: false
        }
    });
    const pie = $('#myPie');
    const myPie = new Chart(pie, {
        type: 'doughnut',
        data: {
          labels: [
            'Red',
            'Blue',
            'Yellow'
          ],
          datasets: [{
            label: 'My First Dataset',
            data: [300, 50, 100],
            backgroundColor: [
              'rgb(255, 99, 132)',
              'rgb(54, 162, 235)',
              'rgb(255, 205, 86)'
            ],
            hoverOffset: 4
          }]
        }
    });
    const pie2 = $('#myPie2');
    const myPie2 = new Chart(pie2, {
        type: 'doughnut',
        data: {
          labels: [
            'Red',
            'Blue',
            'Yellow'
          ],
          datasets: [{
            label: 'My First Dataset',
            data: [300, 50, 100],
            backgroundColor: [
              'rgb(255, 99, 132)',
              'rgb(54, 162, 235)',
              'rgb(255, 205, 86)'
            ],
            hoverOffset: 4
          }]
        }
    });
    
    
$('.resizers').hover(function() {
    $(this).toggleClass('inactive');
    $(this).find('.resizer').toggleClass('hidden');
    //$(this).find('.x').toggleClass('hidden');
});
    
Chart.defaults.global.defaultFontColor = "#fff";

makeResizableDiv('#item1');
makeResizableDiv('#item2');
makeResizableDiv('#item3');
makeResizableDiv('#item4');
    
    
$('#add_widget').click(function() {
    $('#add_new_widget_container').toggleClass('hidden');
})
                         
$('.blur_backdrop').click(function() {
    $('#add_new_widget_container').toggleClass('hidden');
    $('#edit_new_widget_container').toggleClass('hidden');
})                        
$('#enable_select-edit').click(function() {
    $('.inactive').toggleClass('inactive');
    $('.item').toggleClass('select-edit-active');
    
    document.querySelector(".item").onclick = function () {
        $('#edit_widget_container').toggleClass('hidden');
    }
})
    
$('#add_new_widget_submit').click(function() {
    var chartType = $('input[name=select_widget]:checked').val();
    console.log("Creating new chart of type " + chartType);
    $('#add_new_widget_container').toggleClass('hidden');
})    
    
$('.x').click(function() {
    this.parentElement.parentElement.parentElement.remove();
})
    
</script>
      
</body>
</html>
